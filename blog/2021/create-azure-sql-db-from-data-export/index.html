<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <h1 id="create-a-new-azure-sql-database-from-data-tier-application-export">Create a New Azure SQL Database from Data Tier Application Export</h1> <p>If you want to migrate an existing SQL database from local server to Azure SQL the old style backup and restore with *.back file can not be used with Azure SQL managed database. Also the newer Import/Export Data Tier application may fails depending on the PK /FK present into the tables.</p> <p>There are specific tools you can use to migrate an existing database to Azure SQL.</p> <ul> <li>“Deploy to Azure” .</li> <li>“Import Database”</li> <li>Data Migration Assistant (DMA)</li> </ul> <p>The first step is in both cases to create a backpack file with “Export Data Tier Application”</p> <p><img src="/assets/img/sql_export_data_tier_01.png" alt="export 1"></p> <p><img src="/assets/img/sql_export_data_tier_01.png" alt="export 1"></p> <h2 id="deploy-database-to-microsoft--azure-sql">Deploy database to Microsoft Azure SQL</h2> <p><em>If you can not connect to Azure from the original server you may restore a copy of the original DB in PC connected to Internet and the from here run “Deploy Database to Azure SQL”.</em></p> <p><img src="/assets/img/creazione_db_azure_sql_04.png" alt="Deploy to azure"></p> <p>Follow the wizard and fill all required field</p> <p><img src="/assets/img/creazione_db_azure_sql_05.png" alt="Deployment settings "></p> <p>You need to connect to Azure SQL server with a user with privileges to create a new database such as a user with role “contributor” assigned in RBAC.</p> <p><img src="/assets/img/creazione_db_azure_sql_01.png" alt="Login to SQL server"></p> <p>Please nota that you must select the appropriate authentication type from the drop-down list. Multi Factor Authentication (MFA) is active for may account so “Azure Active Directory” is the correct one from me.</p> <p>Then the appropriate service plan for the new database. Nota that these settings can be changed later after deploy completed.</p> <p><img src="/assets/img/creazione_db_azure_sql_06.png" alt="Deployment settings - part 2 "></p> <p>Review deploy setting and click “Finish”. When you do, you will see the progress of the migration, step by step while waiting until completed.</p> <p><img src="/assets/img/creazione_db_azure_sql_07.png" alt="Deployment settings - review "></p> <p>As you can see above, there are number of steps. You can also see that there is a step named “Processing Table”. This step will show each table as it is processed and migrated to Azure SQL Database.</p> <p><img src="/assets/img/creazione_db_azure_sql_08.png" alt="Deploying "></p> <h2 id="import-database">Import Database</h2> <p>TBC</p> <p><img src="/assets/img/azure_sql_import_01.png" alt="import database"></p> <h2 id="data-migration-assistant">Data Migration Assistant</h2> <p>This is a relatively easy tool to use. It really has two purposes.</p> <ol> <li>identify what challenges you might encounter when migrating at database</li> <li>actually complete the migration.</li> </ol> <p>This is a tool the must be <a href="https://www.microsoft.com/en-us/download/details.aspx?id=53595" rel="external nofollow noopener" target="_blank">downloaded</a> and installed before using. Once installed you will find it as <em>“Microsoft Data Migration Assistant”</em> <strong>in the Start menu, not under the SQL Server items</strong>.</p> </body></html>